import{a as G}from"./chunk-ISKPDBW7.js";import{a as P,b as z}from"./chunk-HK54DAHC.js";import{a as J}from"./chunk-2GZCSGRQ.js";import{a as w}from"./chunk-PKCEWX3G.js";import{C as V,d as N,f as l,g as D,h as B,m as I,q as F,r as R,s as k,t as O,u as M,v as T,z as L}from"./chunk-FHPH46MZ.js";import{f as q,k as A}from"./chunk-ZBGVERMW.js";import"./chunk-LVHII46P.js";import{m as S,n as C,y}from"./chunk-RD6NJ7NY.js";import{Bb as s,Gb as a,Sb as t,Tb as e,Ub as E,dc as f,ec as v,kb as m,lb as p,qc as i,ra as x,sc as d,yc as _}from"./chunk-3TFDHLSU.js";import{a as h,b,f as Q}from"./chunk-GAL4ENT6.js";var g=Q(J());function H(o,r){o&1&&(t(0,"div")(1,"p",39),i(2,"\u0E40\u0E25\u0E02\u0E1A\u0E31\u0E15\u0E23\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1B\u0E23\u0E30\u0E0A\u0E32\u0E0A\u0E19 \u0E44\u0E21\u0E48\u0E04\u0E23\u0E1A 13 \u0E2B\u0E25\u0E31\u0E01 "),e()())}function K(o,r){o&1&&(t(0,"div")(1,"p",39),i(2,"\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E25\u0E02\u0E40\u0E01\u0E34\u0E19 13 \u0E2B\u0E25\u0E31\u0E01 "),e()())}function U(o,r){if(o&1&&(t(0,"div")(1,"p",39),i(2),e()()),o&2){let n=v();m(2),d("",n.errorMessage," ")}}function W(o,r){o&1&&(t(0,"div"),i(1," \u0E17\u0E48\u0E32\u0E19\u0E40\u0E04\u0E22\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E41\u0E25\u0E49\u0E27 "),e())}function X(o,r){if(o&1&&(t(0,"option",40),i(1),e()),o&2){let n=r.$implicit;a("ngValue",n),m(),d("",n.name_th," ")}}function Y(o,r){if(o&1&&(t(0,"option",40),i(1),e()),o&2){let n=r.$implicit;a("ngValue",n),m(),d("",n.name_th," ")}}function Z(o,r){if(o&1&&(t(0,"option",40),i(1),e()),o&2){let n=r.$implicit;a("ngValue",n),m(),d("",n.name_th," ")}}function ee(o,r){if(o&1&&E(0,"map-marker",41),o&2){let n=r.$implicit,u=v();a("position",n)("options",u.markerOptions)}}var $=class o{constructor(r,n,u){this.fb=r;this.apidataService=n;this.route=u;this.form=this.fb.group({cid:["",[l.required,l.minLength(13),l.maxLength(13)]],prefix:["",l.required],fname:["",l.required],lname:["",l.required],phone:[""],banumber:["",l.required],moo:["",l.required],province:["",l.required],district:["",l.required],subdistrict:["",l.required],latitude:["",l.required],longitude:["",l.required]})}center={lat:15.5082371,lng:103.0542436};zoom=15;markerOptions={draggable:!1};markerPositions=[];path="registerpatient";addMarker(r){if(r.latLng){let n=r.latLng.toJSON();this.markerPositions=[n],this.form.patchValue({latitude:n.lat,longitude:n.lng})}}form;provinces=G;districts=[];subdistricts=[];errorMessage="";pid="";ngOnInit(){this.form.get("province")?.valueChanges.subscribe(r=>{this.districts=r?r.amphure:[],this.subdistricts=[],this.form.get("district")?.reset(),this.form.get("subdistrict")?.reset()}),this.form.get("district")?.valueChanges.subscribe(r=>{this.subdistricts=r?r.tambon:[],this.form.get("subdistrict")?.reset()})}onSubmit(){this.form.controls.cid.hasError("required")&&(this.errorMessage="\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25"),this.form,this.form.value.province?.name_th,this.form.value.district?.name_th,this.form.value.subdistrict?.name_th,console.log(this.form.value),this.apidataService.sendData(this.path,this.form.value).subscribe({next:r=>{r&&(console.log(r.data),this.pid=r.data[0]._id,g.default.fire({title:"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:'\u0E01\u0E14"\u0E17\u0E33\u0E41\u0E1A\u0E1A\u0E04\u0E31\u0E14\u0E01\u0E23\u0E2D\u0E07 2Q"',icon:"success",showCancelButton:!0,confirmButtonText:"\u0E17\u0E33\u0E41\u0E1A\u0E1A\u0E04\u0E31\u0E14\u0E01\u0E23\u0E2D\u0E07 2Q",cancelButtonText:"\u0E1B\u0E34\u0E14"}).then(n=>{n.isConfirmed&&this.route.navigate(["/assessment/assessment2q"],{queryParams:{pid:this.pid}})}))},error:r=>{if(console.error("\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14:",r),r.error?.message){let n=r.error.patientId;this.pid=n;let u=this.form.controls.cid.errors||{};this.form.controls.cid.setErrors(b(h({},u),{duplicate:!0})),g.default.fire({title:"\u0E17\u0E48\u0E32\u0E19\u0E40\u0E04\u0E22\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E41\u0E25\u0E49\u0E27",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E14\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E41\u0E1A\u0E1A\u0E04\u0E31\u0E14\u0E01\u0E23\u0E2D\u0E07",showCancelButton:!0,confirmButtonText:"\u0E17\u0E33\u0E41\u0E1A\u0E1A\u0E04\u0E31\u0E14\u0E01\u0E23\u0E2D\u0E07 2Q",cancelButtonText:"\u0E1B\u0E34\u0E14"}).then(c=>{c.isConfirmed&&this.route.navigate(["/assessment/assessment2q"],{queryParams:{pid:this.pid}})})}}})}static \u0275fac=function(n){return new(n||o)(p(L),p(w),p(q))};static \u0275cmp=x({type:o,selectors:[["app-register"]],standalone:!0,features:[_],decls:109,vars:14,consts:[[1,"container"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-12","mx-auto"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"font-size","25px"],[3,"formGroup"],[1,"col-sm-3"],[1,"mb-3"],[1,"form-label"],["type","text","name","cid","formControlName","cid","required","",1,"form-control"],[4,"ngIf"],[1,"col-sm-1"],["name","prefix","formControlName","prefix","required","",1,"form-select","form-select-sm","mb-3"],["selected",""],["value","\u0E19\u0E32\u0E22"],["value","\u0E19\u0E32\u0E07"],["value","\u0E19.\u0E2A."],["value","\u0E14.\u0E0A."],["value","\u0E14.\u0E0D."],["type","text","name","fname","formControlName","fname","required","",1,"form-control"],[1,"col-sm-4"],["type","text","name","lname","formControlName","lname","required","",1,"form-control"],["type","text","name","phone","formControlName","phone",1,"form-control"],[1,"col-sm-2"],["type","text","name","banumber","formControlName","banumber","required","",1,"form-control"],["type","text","name","moo","formControlName","moo","required","",1,"form-control"],["formControlName","province","required","",1,"form-select","form-select-sm","mb-3"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","district","required","",1,"form-select","form-select-sm","mb-3",3,"disabled"],["formControlName","subdistrict","required","",1,"form-select","form-select-sm","mb-3",3,"disabled"],["for",""],["height","400px","width","750px",3,"mapClick","center","zoom"],[3,"position","options",4,"ngFor","ngForOf"],["type","text","name","latitude","formControlName","latitude","required","",1,"form-control"],["type","text","name","longitude","formControlName","longitude","required","",1,"form-control"],["type","button",1,"btn","btn-primary","submit",3,"click","disabled"],[2,"color","red"],[3,"ngValue"],[3,"position","options"]],template:function(n,u){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6",7),i(8,"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E1B\u0E23\u0E30\u0E0A\u0E32\u0E0A\u0E19\u0E01\u0E25\u0E38\u0E48\u0E21\u0E40\u0E2A\u0E35\u0E48\u0E22\u0E07"),e(),t(9,"form",8)(10,"div",3)(11,"div",9)(12,"div",10)(13,"label",11),i(14,"\u0E40\u0E25\u0E02\u0E1A\u0E31\u0E15\u0E23\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1B\u0E23\u0E30\u0E0A\u0E32\u0E0A\u0E19"),e(),E(15,"input",12),e(),s(16,H,3,0,"div",13)(17,K,3,0,"div",13)(18,U,3,1,"div",13)(19,W,2,0,"div",13),e(),t(20,"div",14)(21,"div",10)(22,"label",11),i(23,"\u0E04\u0E33\u0E19\u0E33\u0E2B\u0E19\u0E49\u0E32"),e(),t(24,"select",15)(25,"option",16),i(26,"\u0E40\u0E25\u0E37\u0E2D\u0E01"),e(),t(27,"option",17),i(28,"\u0E19\u0E32\u0E22"),e(),t(29,"option",18),i(30,"\u0E19\u0E32\u0E07"),e(),t(31,"option",19),i(32,"\u0E19.\u0E2A."),e(),t(33,"option",20),i(34,"\u0E14.\u0E0A."),e(),t(35,"option",21),i(36,"\u0E14.\u0E0D."),e()()()(),t(37,"div",9)(38,"div",10)(39,"label",11),i(40,"\u0E0A\u0E37\u0E48\u0E2D"),e(),E(41,"input",22),e()(),t(42,"div",23)(43,"div",10)(44,"label",11),i(45,"\u0E2A\u0E01\u0E38\u0E25"),e(),E(46,"input",24),e()()(),t(47,"div",3)(48,"div",23)(49,"div",10)(50,"label",11),i(51,"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"),e(),E(52,"input",25),e()(),t(53,"div",26)(54,"div",10)(55,"label",11),i(56,"\u0E1A\u0E49\u0E32\u0E19\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48"),e(),E(57,"input",27),e()(),t(58,"div",26)(59,"div",10)(60,"label",11),i(61,"\u0E2B\u0E21\u0E39\u0E48"),e(),E(62,"input",28),e()()(),t(63,"div",3)(64,"div",26)(65,"div",10)(66,"label",11),i(67,"\u0E08\u0E31\u0E07\u0E2B\u0E27\u0E31\u0E14"),e(),t(68,"select",29)(69,"option",16),i(70,"\u0E40\u0E25\u0E37\u0E2D\u0E01"),e(),s(71,X,2,2,"option",30),e()()(),t(72,"div",26)(73,"div",10)(74,"label",11),i(75,"\u0E2D\u0E33\u0E40\u0E20\u0E2D"),e(),t(76,"select",31)(77,"option",16),i(78,"\u0E40\u0E25\u0E37\u0E2D\u0E01"),e(),s(79,Y,2,2,"option",30),e()()(),t(80,"div",26)(81,"div",10)(82,"label",11),i(83,"\u0E15\u0E33\u0E1A\u0E25"),e(),t(84,"select",32)(85,"option",16),i(86,"\u0E40\u0E25\u0E37\u0E2D\u0E01"),e(),s(87,Z,2,2,"option",30),e()()(),t(88,"div",10)(89,"label",33),i(90,"\u0E1B\u0E31\u0E01\u0E2B\u0E21\u0E38\u0E14\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48"),e(),t(91,"google-map",34),f("mapClick",function(j){return u.addMarker(j)}),s(92,ee,1,2,"map-marker",35),e()(),t(93,"div",3)(94,"div",26)(95,"div",10)(96,"label",11),i(97,"lat"),e(),E(98,"input",36),e()(),t(99,"div",26)(100,"div",10)(101,"label",11),i(102,"lng"),e(),E(103,"input",37),e()()()()(),t(104,"div",3)(105,"div",9)(106,"div",10)(107,"button",38),f("click",function(){return u.onSubmit()}),i(108,"Submit form"),e()()()()()()()()()()()),n&2&&(m(9),a("formGroup",u.form),m(7),a("ngIf",u.form.controls.cid.hasError("minlength")),m(),a("ngIf",u.form.controls.cid.hasError("maxlength")),m(),a("ngIf",u.form.controls.cid.hasError("required")),m(),a("ngIf",u.form.controls.cid.hasError("duplicate")),m(52),a("ngForOf",u.provinces),m(5),a("disabled",!u.districts.length),m(3),a("ngForOf",u.districts),m(5),a("disabled",!u.subdistricts.length),m(3),a("ngForOf",u.subdistricts),m(4),a("center",u.center)("zoom",u.zoom),m(),a("ngForOf",u.markerPositions),m(15),a("disabled",u.form.invalid))},dependencies:[V,I,O,M,N,k,D,B,T,F,R,y,S,C,P,z,A]})};export{$ as RegisterComponent};
